{% extends "base.html" %} {% load static %} {% load i18n %} {% load proposals %} {% block content %} {% include "_sidebar.html" %}


<div class="container cover animatedParent animateOnce" data-sequence='300'>
    <div class="row cover-content">
        <div class="col l3 m12 valign-wrapper animated fadeInLeftShort" data-id='1'>
            {% include "_sidebar_logo.html" %}
        </div>
        <div class="col l9 m12 valign-wrapper">
            <div class="cover-info animated fadeInRightShort" data-id='2'>
                <h1>{% trans "Your legislative editing tool" %}</h1>
                <p class="desc">{% trans "Wikilegis is a project developed by the Brazilian Chamber of Deputies’ Hacker Lab, designed to enable citizens to suggest modifications to the wording of Bills" %}</p>
            </div>
        </div>
    </div>
    {% if not user.is_authenticated %}
    <div class="row">
        <div class="login-or-signup animated fadeInDown" data-id='3'>
            Faça <a href="{% url "auth_login" %}">login</a> ou <a href="{% url "registration_register" %}">cadastre-se</a>
        </div>
    </div>
    {% endif %}
    <div class="see-projects animated fadeInUpShort" data-id='4'>
        <div>
            <p>Veja os projetos de lei que você pode opinar</p>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="imgView" x="0px" y="0px" viewBox="0 0 453.834 453.834" style="enable-background:new 0 0 453.834 453.834;" xml:space="preserve" class="detail convertSvgInline replaced-svg" width="50px" height="50px" data-id="7584" data-kw="down139">
                <g>
                    <path d="M226.932,0C101.625,0,0.03,101.595,0.03,226.902C0,352.269,101.595,453.834,226.932,453.834      c125.307,0,226.871-101.595,226.871-226.902C453.834,101.595,352.239,0,226.932,0z M226.932,423.465      c-108.344,0-196.502-88.158-196.502-196.502S118.588,30.46,226.932,30.46c108.344-0.03,196.472,88.128,196.472,196.502      C423.434,335.276,335.276,423.465,226.932,423.465z"></path>
                    <path d="M313.723,177.199l-87.885,87.915l-87.885-87.915c-5.928-5.928-15.565-5.928-21.492,0      s-5.928,15.565,0,21.492l98.585,98.585c2.979,3.04,6.901,4.438,10.792,4.438c3.922,0,7.813-1.49,10.792-4.438l98.555-98.585      c5.928-5.928,5.928-15.565,0-21.492S319.65,171.271,313.723,177.199z"></path>
                </g>
            </svg>
        </div>
    </div>
</div>



<div class="row projects" id="projects">
    <div class="container">
        <div class="row">
            <div class="col s12 m6">
                <h2 class="title">{% if request.GET.status = 'closed' %}{% trans "Closed Law Projects" %}{% else %}{% trans "Law Projects" %}{% endif %}</h2>
            </div>
            <div class="col s12 m6">
                <ul class="filter">
                    {% for item in orderer.choices %}
                    <li><a {% if item.selected %} class="active" {% endif %} href="{{ item.query_string }}#projects">{{ item.display }}</a>
                    </li><span class="divider">|</span> {% endfor %}
                </ul>
                <ul class="filter">
                    <li><a {% if request.GET.status != 'closed' %} class="active" {% endif %} href="{% url 'index' %}?status=published#projects">{% trans "Open" %}</a>
                    </li><span class="divider">|</span>
                    <li><a {% if request.GET.status = 'closed' %} class="active" {% endif %} href="{% url 'index' %}?status=closed#projects">{% trans "Closed" %}</a>
                </ul>
            </div>
        </div>
        <div class="pls">
            {% for bill in bills %}
            <a class="hover" href="{% url 'show_bill' bill.id %}">
                <div class="pl row valign-wrapper">
                    <div class="col m2 hide-on-med-and-down">
                        <div class="circle valign-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="imgView" x="0px" y="0px" width="50px" height="50px" viewBox="0 0 470.586 470.586" style="enable-background:new 0 0 470.586 470.586;" xml:space="preserve" class="detail convertSvgInline replaced-svg" data-id="32329" data-kw="text70">
                                <g>
                                    <path d="M327.081,0H90.234C74.331,0,61.381,12.959,61.381,28.859v412.863c0,15.924,12.95,28.863,28.853,28.863H380.35   c15.917,0,28.855-12.939,28.855-28.863V89.234L327.081,0z M333.891,43.184l35.996,39.121h-35.996V43.184z M384.972,441.723   c0,2.542-2.081,4.629-4.635,4.629H90.234c-2.55,0-4.619-2.087-4.619-4.629V28.859c0-2.548,2.069-4.613,4.619-4.613h219.411v70.181   c0,6.682,5.443,12.099,12.129,12.099h63.198V441.723z M128.364,128.89H334.15c5.013,0,9.079,4.066,9.079,9.079   c0,5.013-4.066,9.079-9.079,9.079H128.364c-5.012,0-9.079-4.066-9.079-9.079C119.285,132.957,123.352,128.89,128.364,128.89z    M343.229,198.98c0,5.012-4.066,9.079-9.079,9.079H128.364c-5.012,0-9.079-4.066-9.079-9.079s4.067-9.079,9.079-9.079H334.15   C339.163,189.901,343.229,193.968,343.229,198.98z M343.229,257.993c0,5.013-4.066,9.079-9.079,9.079H128.364   c-5.012,0-9.079-4.066-9.079-9.079s4.067-9.079,9.079-9.079H334.15C339.163,248.914,343.229,252.98,343.229,257.993z    M343.229,318.011c0,5.013-4.066,9.079-9.079,9.079H128.364c-5.012,0-9.079-4.066-9.079-9.079s4.067-9.079,9.079-9.079H334.15   C339.163,308.932,343.229,312.998,343.229,318.011z"></path>
                                </g>
                            </svg>
                        </div>
                    </div>
                    <div class="col s12 m10 description">
                        <div class="row">
                            <h5 class="title">{{ bill.title }}</h5>
                            <p class="d">{{ bill.description|linebreaks|truncatechars:205 }}</p>
                            <span class="pl-created-date">Criado em {{ bill.created|date }}</span>
                        </div>                        
                        <div class="row valign-wrapper">
                            {% if bill.proposition_set.all.0.situation %}
                            <div class="col s12 m6 status">
                                <span class="title">Status da PL: </span><span class="status-content">{{ bill.proposition_set.all.0.situation }}</span>
                            </div>
                            {% else %}
                            <div class="col s12 m6"></div>
                            {% endif %}
                            <div class="col s12 m6 users">
                                <!-- User relevance here? -->
                                <!--<span class="dep">Dep. Eduardo Cunha</span>, Bruna Oliveira e outras <span class="users-count">18 pessoas</span>-->
                                <span class="users-count">{{ bill|attendees_count }} {% if bill|attendees_count > 1 %}participantes{% else %}participante{% endif %} </span>
                            </div>
                        </div>
                    </div>
                    <div class="col s12 m2 prop-count">
                        {% if bill|proposals_count > 0 %}
                            <h4>{{ bill|proposals_count }}</h4>
                            <span>{% if bill|proposals_count > 1 %}propostas{% else %}proposta{% endif %}</span>
                            {% else %}
                            {% if bill.status = 'closed' %}
                            <div class="add-prop-cta">
                                <span>Não há propostas</span>
                            </div>
                            {% else %}
                            <div class="add-prop-cta">
                                <span>Não há propostas</span>
                                <div>Participe!</div>
                            </div>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </a>
            {% empty %} 
            <div class="pl row valign-wrapper">
                <div class="col s12 m10 description">
                    <div class="row">
                        <h5 class="title">Não há projetos de Lei</h5>
                    </div>                        
                </div>
            </div>            
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}